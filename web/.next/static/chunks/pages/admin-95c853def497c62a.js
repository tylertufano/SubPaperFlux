(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return l(1257)}])},1257:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return d}});var n=l(5893),r=l(1758),i=l(4985),t=l(7294),a=l(5451);function d(){var e,s,l;let[d,c]=(0,t.useState)(""),{data:o}=(0,r.ZP)(["/v1/status"],()=>a.v1.getStatusV1StatusGet()),{data:u}=(0,r.ZP)(["/v1/status/db"],()=>a.v1.dbStatusV1StatusDbGet());return(0,n.jsxs)("div",{children:[(0,n.jsx)(i.Z,{}),(0,n.jsxs)("main",{className:"container py-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Admin"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[(0,n.jsxs)("div",{className:"card p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"System"}),(0,n.jsxs)("ul",{className:"text-sm text-gray-800 space-y-1",children:[(0,n.jsxs)("li",{children:["API Status: ",(null==o?void 0:o.status)||"—"]}),(0,n.jsxs)("li",{children:["Version: ",(null==o?void 0:o.version)||"—"]}),(0,n.jsxs)("li",{children:["OpenAPI: ",(0,n.jsx)("a",{className:"text-blue-600 hover:underline",href:"/openapi.json",target:"_blank",rel:"noreferrer",children:"/openapi.json"})]}),(0,n.jsxs)("li",{children:["Docs: ",(0,n.jsx)("a",{className:"text-blue-600 hover:underline",href:"/docs",target:"_blank",rel:"noreferrer",children:"/docs"})]}),(0,n.jsxs)("li",{children:["Metrics: ",(0,n.jsx)("a",{className:"text-blue-600 hover:underline",href:"/metrics",target:"_blank",rel:"noreferrer",children:"/metrics"})]})]})]}),(0,n.jsxs)("div",{className:"card p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Database"}),(0,n.jsxs)("ul",{className:"text-sm text-gray-800 space-y-1",children:[(0,n.jsxs)("li",{children:["Status: ",(null==u?void 0:u.ok)===!0?"ok":u?"check":"—"]}),(0,n.jsxs)("li",{children:["pg_trgm: ",String(null!==(l=null==u?void 0:null===(e=u.details)||void 0===e?void 0:e.pg_trgm_enabled)&&void 0!==l?l:"—")]}),(null==u?void 0:null===(s=u.details)||void 0===s?void 0:s.indexes)&&(0,n.jsxs)("li",{children:["Indexes OK: ",String(Object.values(u.details.indexes).every(Boolean))]})]})]}),(0,n.jsxs)("div",{className:"card p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Actions"}),(0,n.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,n.jsx)("button",{onClick:async()=>{c(JSON.stringify(await a.v1.postgresPrepareV1AdminPostgresPreparePost()))},children:"Prepare Postgres (pg_trgm + indexes)"}),(0,n.jsx)("button",{onClick:async()=>{c(JSON.stringify(await a.v1.postgresEnableRlsV1AdminPostgresEnableRlsPost()))},children:"Enable RLS (owner policies)"})]})]})]}),d&&(0,n.jsx)("pre",{className:"card p-3 overflow-auto text-sm",children:d})]})]})}}},function(e){e.O(0,[360,561,888,774,179],function(){return e(e.s=577)}),_N_E=e.O()}]);
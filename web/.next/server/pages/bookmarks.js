"use strict";(()=>{var e={};e.id=664,e.ids=[664,660],e.modules={1092:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>x,getStaticPaths:()=>p,getStaticProps:()=>h,reportWebVitals:()=>b,routeModule:()=>S,unstable_getServerProps:()=>k,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>j});var l=s(7093),r=s(5244),i=s(1323),n=s(2899),c=s.n(n),o=s(6814),d=s(5564),u=e([o,d]);[o,d]=u.then?(await u)():u;let m=(0,i.l)(d,"default"),h=(0,i.l)(d,"getStaticProps"),p=(0,i.l)(d,"getStaticPaths"),x=(0,i.l)(d,"getServerSideProps"),g=(0,i.l)(d,"config"),b=(0,i.l)(d,"reportWebVitals"),j=(0,i.l)(d,"unstable_getStaticProps"),v=(0,i.l)(d,"unstable_getStaticPaths"),f=(0,i.l)(d,"unstable_getStaticParams"),k=(0,i.l)(d,"unstable_getServerProps"),N=(0,i.l)(d,"unstable_getServerSideProps"),S=new l.PagesRouteModule({definition:{kind:r.x.PAGES,page:"/bookmarks",pathname:"/bookmarks",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:d});a()}catch(e){a(e)}})},7435:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(997);function l({kind:e="info",message:t,onClose:s}){let l="success"===e?"green":"warning"===e?"yellow":"error"===e?"red":"blue";return(0,a.jsxs)("div",{className:`rounded-md border px-3 py-2 bg-${l}-50 border-${l}-200 text-${l}-800 flex items-start justify-between gap-2`,children:[a.jsx("div",{children:t}),s&&a.jsx("button",{className:`text-${l}-800`,onClick:s,children:"\xd7"})]})}},5564:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>u});var l=s(997),r=s(5941),i=s(4985),n=s(5573),c=s(6689),o=s(7435),d=e([r,i,n]);function u(){let[e,t]=(0,c.useState)(1),[s,a]=(0,c.useState)(""),[d,u]=(0,c.useState)([]),[m,h]=(0,c.useState)(""),[p,x]=(0,c.useState)(""),[g,b]=(0,c.useState)(""),[j,v]=(0,c.useState)(""),[f,k]=(0,c.useState)(!1);function N(e){if(e)return e.endsWith("Z")?e:e+":00Z"}let{data:S,error:y,isLoading:P,mutate:C}=(0,r.default)(["/v1/bookmarks",e,s,p,g,j,f],([,e,t,s,a,l,r])=>n.v1.listBookmarksV1BookmarksGet({page:e,search:t,feedId:s||void 0,since:N(a),until:N(l),fuzzy:r||void 0})),{data:_}=(0,r.default)(["/v1/feeds"],()=>n.v1.listFeedsV1V1FeedsGet({})),w=Array.isArray(_)?_:_?.items??[],[V,q]=(0,c.useState)(null),[B,z]=(0,c.useState)({});async function D(){let e=Object.entries(B).filter(([,e])=>e).map(([e])=>e);if(e.length&&confirm(`Delete ${e.length} bookmarks? This also deletes in Instapaper.`))try{await n.v1.bulkDeleteBookmarksV1BookmarksBulkDeletePost({requestBody:{ids:e,delete_remote:!0}}),q({kind:"success",message:`Deleted ${e.length} bookmarks.`}),z({}),C()}catch(e){q({kind:"error",message:`Delete failed: ${e.message||e}`})}}function O(e){let t=(S?.items??[]).filter(e=>B[e.id]);if(t.length){if("json"===e){let e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download="bookmarks.json",s.click()}else{let e=["id","instapaper_bookmark_id","title","url","content_location","feed_id","published_at"],s=[e.join(",")].concat(t.map(t=>e.map(e=>JSON.stringify(t[e]??"")).join(","))),a=new Blob([s.join("\n")],{type:"text/csv"}),l=document.createElement("a");l.href=URL.createObjectURL(a),l.download="bookmarks.csv",l.click()}}}return(0,l.jsxs)("div",{children:[l.jsx(i.Z,{}),(0,l.jsxs)("main",{className:"container py-6",children:[l.jsx("div",{className:"flex items-center gap-2 mb-3",children:l.jsx("h2",{className:"text-xl font-semibold",children:"Bookmarks"})}),(0,l.jsxs)("div",{className:"card p-4 mb-4 grid grid-cols-1 md:grid-cols-7 gap-2 items-center",children:[l.jsx("input",{className:"input",value:s,onChange:e=>a(e.target.value),placeholder:"Search"}),(0,l.jsxs)("select",{className:"input",value:p,onChange:e=>x(e.target.value),children:[l.jsx("option",{value:"",children:"All Feeds"}),w.map(e=>l.jsx("option",{value:e.id,children:e.url},e.id))]}),l.jsx("input",{className:"input",type:"datetime-local",value:g,onChange:e=>b(e.target.value),title:"Since"}),l.jsx("input",{className:"input",type:"datetime-local",value:j,onChange:e=>v(e.target.value),title:"Until"}),(0,l.jsxs)("label",{className:"inline-flex items-center gap-2 text-gray-700",children:[l.jsx("input",{type:"checkbox",checked:f,onChange:e=>k(e.target.checked)})," Fuzzy"]}),l.jsx("button",{className:"btn",onClick:()=>{t(1),C()},children:"Search"}),l.jsx("button",{className:"btn",onClick:function(){a(""),x(""),b(""),v(""),k(!1),t(1),C()},children:"Clear"}),(0,l.jsxs)("select",{className:"input md:col-span-2",onChange:e=>{let s=d.find(t=>t.name===e.target.value);s&&(a(s.search||""),x(s.feed_id||""),b(s.since||""),v(s.until||""),k(!!s.fuzzy),t(1),C())},defaultValue:"",children:[l.jsx("option",{value:"",disabled:!0,children:"Saved Views"}),d.map(e=>l.jsx("option",{value:e.name,children:e.name},e.name))]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[l.jsx("input",{className:"input",placeholder:"Save as...",value:m,onChange:e=>h(e.target.value)}),l.jsx("button",{className:"btn",onClick:function(){if(!m.trim())return;let e=[...d.filter(e=>e.name!==m.trim()),{name:m.trim(),search:s,feed_id:p||void 0,since:g||void 0,until:j||void 0,fuzzy:f}];u(e),localStorage.setItem("bookmarkViews",JSON.stringify(e)),h("")},children:"Save View"})]})]}),V&&l.jsx("div",{className:"mb-3",children:l.jsx(o.Z,{kind:V.kind,message:V.message,onClose:()=>q(null)})}),P&&l.jsx("p",{className:"text-gray-600",children:"Loading..."}),y&&l.jsx(o.Z,{kind:"error",message:String(y)}),S&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"card p-0 overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-3 flex items-center gap-2",children:[l.jsx("button",{className:"btn",disabled:!S.items?.length,onClick:D,children:"Delete Selected"}),l.jsx("button",{className:"btn",disabled:!S.items?.length,onClick:()=>O("json"),children:"Export JSON"}),l.jsx("button",{className:"btn",disabled:!S.items?.length,onClick:()=>O("csv"),children:"Export CSV"})]}),(0,l.jsxs)("table",{className:"table",children:[l.jsx("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"th",scope:"col",children:l.jsx("input",{"aria-label":"Select all",type:"checkbox",onChange:e=>(function(e){let t={};for(let s of S?.items??[])t[s.id]=e;z(t)})(e.target.checked)})}),l.jsx("th",{className:"th",scope:"col",children:"Title"}),l.jsx("th",{className:"th",scope:"col",children:"URL"}),l.jsx("th",{className:"th",scope:"col",children:"Published"})]})}),l.jsx("tbody",{children:S.items.map(e=>(0,l.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50",children:[l.jsx("td",{className:"td",children:l.jsx("input",{type:"checkbox",checked:B[e.id]||!1,onChange:t=>{var s,a;return s=e.id,a=t.target.checked,void z(e=>({...e,[s]:a}))}})}),l.jsx("td",{className:"td",children:e.title}),l.jsx("td",{className:"td",children:l.jsx("a",{className:"text-blue-600 hover:underline",href:e.url,target:"_blank",rel:"noreferrer",children:e.url})}),l.jsx("td",{className:"td",children:e.published_at||""})]},e.id))})]})]}),(0,l.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[l.jsx("button",{className:"btn",disabled:e<=1,onClick:()=>t(e-1),children:"Prev"}),(0,l.jsxs)("span",{className:"text-gray-700",children:["Page ",e," / ",S.totalPages]}),l.jsx("button",{className:"btn",disabled:!S.hasNext,onClick:()=>t(e+1),children:"Next"})]})]})]})]})}[r,i,n]=d.then?(await d)():d,a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5526:e=>{e.exports=import("next-auth/react")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[899,910,902],()=>s(1092));module.exports=a})();
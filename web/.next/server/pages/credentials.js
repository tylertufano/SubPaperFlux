"use strict";(()=>{var e={};e.id=749,e.ids=[749,660],e.modules={1223:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>p,reportWebVitals:()=>f,routeModule:()=>S,unstable_getServerProps:()=>k,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>_,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>b});var a=r(7093),i=r(5244),n=r(1323),l=r(2899),d=r.n(l),c=r(6814),o=r(7619),u=e([c,o]);[c,o]=u.then?(await u)():u;let m=(0,n.l)(o,"default"),p=(0,n.l)(o,"getStaticProps"),x=(0,n.l)(o,"getStaticPaths"),h=(0,n.l)(o,"getServerSideProps"),g=(0,n.l)(o,"config"),f=(0,n.l)(o,"reportWebVitals"),b=(0,n.l)(o,"unstable_getStaticProps"),j=(0,n.l)(o,"unstable_getStaticPaths"),_=(0,n.l)(o,"unstable_getStaticParams"),k=(0,n.l)(o,"unstable_getServerProps"),v=(0,n.l)(o,"unstable_getServerSideProps"),S=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/credentials",pathname:"/credentials",bundlePath:"",filename:""},components:{App:c.default,Document:d()},userland:o});s()}catch(e){s(e)}})},7435:(e,t,r)=>{r.d(t,{Z:()=>a});var s=r(997);function a({kind:e="info",message:t,onClose:r}){let a="success"===e?"green":"warning"===e?"yellow":"error"===e?"red":"blue";return(0,s.jsxs)("div",{className:`rounded-md border px-3 py-2 bg-${a}-50 border-${a}-200 text-${a}-800 flex items-start justify-between gap-2`,children:[s.jsx("div",{children:t}),r&&s.jsx("button",{className:`text-${a}-800`,onClick:r,children:"\xd7"})]})}},1789:(e,t,r)=>{function s(e){try{return new URL(e),!0}catch{return!1}}function a(e){try{return{ok:!0,data:JSON.parse(e)}}catch(e){return{ok:!1,error:e?.message||"Invalid JSON"}}}function i(e,t){if(!t||"object"!=typeof t)return"Data must be a JSON object";if("site_login"===e)return t.username?t.password?null:"password is required":"username is required";if("miniflux"===e)return t.miniflux_url&&s(t.miniflux_url)?t.api_key?null:"api_key is required":"miniflux_url is invalid";if("instapaper"===e)return t.oauth_token?t.oauth_token_secret?null:"oauth_token_secret is required":"oauth_token is required";if("instapaper_app"===e){if(!t.consumer_key)return"consumer_key is required";if(!t.consumer_secret)return"consumer_secret is required"}return null}function n(e){return e.name?.trim()?e.site_url&&s(e.site_url)?e.username_selector?.trim()?e.password_selector?.trim()?e.login_button_selector?.trim()?null:"Login button selector is required":"Password selector is required":"Username selector is required":"Site URL is invalid":"Name is required"}r.d(t,{Et:()=>i,kq:()=>n,rM:()=>a})},7619:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>m});var a=r(997),i=r(5941),n=r(4985),l=r(5573),d=r(6689),c=r(7435),o=r(1789),u=e([i,n,l]);function m(){let{data:e,error:t,isLoading:r,mutate:s}=(0,i.default)(["/v1/credentials"],()=>l.v1.listCredentialsV1V1CredentialsGet({})),[u,m]=(0,d.useState)("site_login"),[p,x]=(0,d.useState)(!1),[h,g]=(0,d.useState)('{\n  "username": "",\n  "password": ""\n}'),[f,b]=(0,d.useState)(null);async function j(e){try{if("instapaper"===e.kind){let t=await l.v1.testInstapaperV1IntegrationsInstapaperTestPost({requestBody:{credential_id:e.id}});b({kind:t.ok?"success":"error",message:`Instapaper: ${JSON.stringify(t)}`})}else if("miniflux"===e.kind){let t=await l.v1.testMinifluxV1IntegrationsMinifluxTestPost({requestBody:{credential_id:e.id}});b({kind:t.ok?"success":"error",message:`Miniflux: ${JSON.stringify(t)}`})}}catch(e){b({kind:"error",message:e.message||String(e)})}}async function _(){let e=(0,o.rM)(h);if(!e.ok){b({kind:"error",message:e.error});return}let t=(0,o.Et)(u,e.data);if(t){b({kind:"error",message:t});return}try{await l.fV.createCredentialCredentialsPost({credential:{kind:u,data:e.data,ownerUserId:p?null:void 0}}),g(""),b({kind:"success",message:"Credential created"}),s()}catch(e){b({kind:"error",message:e.message||String(e)})}}async function k(e){if(confirm("Delete credential?"))try{await l.fV.deleteCredentialCredentialsCredIdDelete({credId:e}),b({kind:"success",message:"Credential deleted"}),s()}catch(e){b({kind:"error",message:e.message||String(e)})}}return(0,a.jsxs)("div",{children:[a.jsx(n.Z,{}),(0,a.jsxs)("main",{className:"container py-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Credentials"}),r&&a.jsx("p",{className:"text-gray-600",children:"Loading..."}),t&&a.jsx("p",{className:"text-red-600",children:String(t)}),f&&a.jsx("div",{className:"mb-3",children:a.jsx(c.Z,{kind:f.kind,message:f.message,onClose:()=>b(null)})}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"card p-4 mb-4 flex flex-col gap-2",children:[a.jsx("h3",{className:"font-semibold",children:"Create Credential"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("label",{children:"Kind:"}),(0,a.jsxs)("select",{className:"input",value:u,onChange:e=>m(e.target.value),children:[a.jsx("option",{value:"site_login",children:"site_login"}),a.jsx("option",{value:"miniflux",children:"miniflux"}),a.jsx("option",{value:"instapaper",children:"instapaper"}),a.jsx("option",{value:"instapaper_app",children:"instapaper_app (admin/global)"})]}),(0,a.jsxs)("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:p,onChange:e=>x(e.target.checked)})," Global (admin)"]})]}),a.jsx("textarea",{className:"input min-h-[120px]",value:h,onChange:e=>g(e.target.value),placeholder:"JSON data"}),a.jsx("div",{children:a.jsx("button",{className:"btn",onClick:_,children:"Create"})})]}),a.jsx("div",{className:"card p-0 overflow-hidden",children:(0,a.jsxs)("table",{className:"table",children:[a.jsx("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"th",scope:"col",children:"ID"}),a.jsx("th",{className:"th",scope:"col",children:"Kind"}),a.jsx("th",{className:"th",scope:"col",children:"Scope"}),a.jsx("th",{className:"th",scope:"col",children:"Actions"})]})}),a.jsx("tbody",{children:(e.items??e).map(e=>(0,a.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50",children:[a.jsx("td",{className:"td",children:e.id}),a.jsx("td",{className:"td",children:e.kind}),a.jsx("td",{className:"td",children:e.ownerUserId?"User":"Global"}),(0,a.jsxs)("td",{className:"td flex gap-2",children:[("instapaper"===e.kind||"miniflux"===e.kind)&&a.jsx("button",{className:"btn",onClick:()=>j(e),children:"Test"}),a.jsx("button",{className:"btn",onClick:()=>k(e.id),children:"Delete"})]})]},e.id))})]})})]})]})]})}[i,n,l]=u.then?(await u)():u,s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5526:e=>{e.exports=import("next-auth/react")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[899,910,902],()=>r(1223));module.exports=s})();
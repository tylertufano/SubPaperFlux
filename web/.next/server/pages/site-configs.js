"use strict";(()=>{var e={};e.id=753,e.ids=[753,660],e.modules={1665:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>x,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>g,reportWebVitals:()=>_,routeModule:()=>k,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>f});var i=s(7093),a=s(5244),n=s(1323),o=s(2899),l=s.n(o),c=s(6814),u=s(3859),d=e([c,u]);[c,u]=d.then?(await d)():d;let m=(0,n.l)(u,"default"),g=(0,n.l)(u,"getStaticProps"),p=(0,n.l)(u,"getStaticPaths"),h=(0,n.l)(u,"getServerSideProps"),x=(0,n.l)(u,"config"),_=(0,n.l)(u,"reportWebVitals"),f=(0,n.l)(u,"unstable_getStaticProps"),b=(0,n.l)(u,"unstable_getStaticPaths"),S=(0,n.l)(u,"unstable_getStaticParams"),j=(0,n.l)(u,"unstable_getServerProps"),v=(0,n.l)(u,"unstable_getServerSideProps"),k=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/site-configs",pathname:"/site-configs",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:u});r()}catch(e){r(e)}})},7435:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(997);function i({kind:e="info",message:t,onClose:s}){let i="success"===e?"green":"warning"===e?"yellow":"error"===e?"red":"blue";return(0,r.jsxs)("div",{className:`rounded-md border px-3 py-2 bg-${i}-50 border-${i}-200 text-${i}-800 flex items-start justify-between gap-2`,children:[r.jsx("div",{children:t}),s&&r.jsx("button",{className:`text-${i}-800`,onClick:s,children:"\xd7"})]})}},1789:(e,t,s)=>{function r(e){try{return new URL(e),!0}catch{return!1}}function i(e){try{return{ok:!0,data:JSON.parse(e)}}catch(e){return{ok:!1,error:e?.message||"Invalid JSON"}}}function a(e,t){if(!t||"object"!=typeof t)return"Data must be a JSON object";if("site_login"===e)return t.username?t.password?null:"password is required":"username is required";if("miniflux"===e)return t.miniflux_url&&r(t.miniflux_url)?t.api_key?null:"api_key is required":"miniflux_url is invalid";if("instapaper"===e)return t.oauth_token?t.oauth_token_secret?null:"oauth_token_secret is required":"oauth_token is required";if("instapaper_app"===e){if(!t.consumer_key)return"consumer_key is required";if(!t.consumer_secret)return"consumer_secret is required"}return null}function n(e){return e.name?.trim()?e.site_url&&r(e.site_url)?e.username_selector?.trim()?e.password_selector?.trim()?e.login_button_selector?.trim()?null:"Login button selector is required":"Password selector is required":"Username selector is required":"Site URL is invalid":"Name is required"}s.d(t,{Et:()=>a,kq:()=>n,rM:()=>i})},3859:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>m});var i=s(997),a=s(5941),n=s(4985),o=s(5573),l=s(6689),c=s(7435),u=s(1789),d=e([a,n,o]);function m(){let{data:e,error:t,isLoading:s,mutate:r}=(0,a.default)(["/v1/site-configs"],()=>o.v1.listSiteConfigsV1V1SiteConfigsGet({})),[d,m]=(0,l.useState)({name:"",site_url:"",username_selector:"",password_selector:"",login_button_selector:"",cookies_to_store:""}),[g,p]=(0,l.useState)(!1),[h,x]=(0,l.useState)(null);async function _(){let e={...d,cookies_to_store:d.cookies_to_store.split(",").map(e=>e.trim()).filter(Boolean)};try{let t=(0,u.kq)(e);if(t){x({kind:"error",message:t});return}await o.RX.createSiteConfigSiteConfigsPost({siteConfig:{...e,ownerUserId:g?null:void 0}}),m({name:"",site_url:"",username_selector:"",password_selector:"",login_button_selector:"",cookies_to_store:""}),p(!1),x({kind:"success",message:"Site config created"}),r()}catch(e){x({kind:"error",message:e.message||String(e)})}}async function f(e){if(confirm("Delete site config?"))try{await o.RX.deleteSiteConfigSiteConfigsConfigIdDelete({configId:e}),x({kind:"success",message:"Site config deleted"}),r()}catch(e){x({kind:"error",message:e.message||String(e)})}}return(0,i.jsxs)("div",{children:[i.jsx(n.Z,{}),(0,i.jsxs)("main",{className:"container py-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Site Configs"}),h&&i.jsx("div",{className:"mb-3",children:i.jsx(c.Z,{kind:h.kind,message:h.message,onClose:()=>x(null)})}),s&&i.jsx("p",{className:"text-gray-600",children:"Loading..."}),t&&i.jsx(c.Z,{kind:"error",message:String(t)}),(0,i.jsxs)("div",{className:"card p-4 mb-4 grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsx("h3",{className:"font-semibold md:col-span-2",children:"Create Site Config"}),i.jsx("input",{className:"input",placeholder:"Name",value:d.name,onChange:e=>m({...d,name:e.target.value})}),i.jsx("input",{className:"input",placeholder:"Site URL",value:d.site_url,onChange:e=>m({...d,site_url:e.target.value})}),i.jsx("input",{className:"input",placeholder:"Username selector",value:d.username_selector,onChange:e=>m({...d,username_selector:e.target.value})}),i.jsx("input",{className:"input",placeholder:"Password selector",value:d.password_selector,onChange:e=>m({...d,password_selector:e.target.value})}),i.jsx("input",{className:"input",placeholder:"Login button selector",value:d.login_button_selector,onChange:e=>m({...d,login_button_selector:e.target.value})}),i.jsx("input",{className:"input md:col-span-2",placeholder:"Cookies to store (comma-separated)",value:d.cookies_to_store,onChange:e=>m({...d,cookies_to_store:e.target.value})}),(0,i.jsxs)("label",{className:"inline-flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:g,onChange:e=>p(e.target.checked)})," Global (admin)"]}),i.jsx("button",{className:"btn",onClick:_,children:"Create"})]}),e&&i.jsx("div",{className:"card p-0 overflow-hidden",children:(0,i.jsxs)("table",{className:"table",children:[i.jsx("thead",{className:"bg-gray-100",children:(0,i.jsxs)("tr",{children:[i.jsx("th",{className:"th",scope:"col",children:"Name"}),i.jsx("th",{className:"th",scope:"col",children:"URL"}),i.jsx("th",{className:"th",scope:"col",children:"Scope"}),i.jsx("th",{className:"th",scope:"col",children:"Actions"})]})}),i.jsx("tbody",{children:(e.items||e).map(e=>(0,i.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50",children:[i.jsx("td",{className:"td",children:e.name}),i.jsx("td",{className:"td",children:e.site_url}),i.jsx("td",{className:"td",children:e.owner_user_id?"User":"Global"}),(0,i.jsxs)("td",{className:"td flex gap-2",children:[i.jsx("button",{className:"btn",onClick:async()=>{try{let t=await o.v1.testSiteConfigV1SiteConfigsConfigIdTestPost({configId:e.id});x({kind:t.ok?"success":"error",message:`Test: ${JSON.stringify(t)}`})}catch(e){x({kind:"error",message:e.message||String(e)})}},children:"Test Login"}),i.jsx("button",{className:"btn",onClick:()=>f(e.id),children:"Delete"})]})]},e.id))})]})})]})]})}[a,n,o]=d.then?(await d)():d,r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5526:e=>{e.exports=import("next-auth/react")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[899,910,902],()=>s(1665));module.exports=r})();
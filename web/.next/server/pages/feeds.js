"use strict";(()=>{var e={};e.id=716,e.ids=[716,660],e.modules={621:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>x,default:()=>h,getServerSideProps:()=>p,getStaticPaths:()=>m,getStaticProps:()=>g,reportWebVitals:()=>j,routeModule:()=>v,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>k,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var l=t(7093),i=t(5244),r=t(1323),n=t(2899),d=t.n(n),c=t(6814),o=t(3221),u=e([c,o]);[c,o]=u.then?(await u)():u;let h=(0,r.l)(o,"default"),g=(0,r.l)(o,"getStaticProps"),m=(0,r.l)(o,"getStaticPaths"),p=(0,r.l)(o,"getServerSideProps"),x=(0,r.l)(o,"config"),j=(0,r.l)(o,"reportWebVitals"),b=(0,r.l)(o,"unstable_getStaticProps"),f=(0,r.l)(o,"unstable_getStaticPaths"),k=(0,r.l)(o,"unstable_getStaticParams"),N=(0,r.l)(o,"unstable_getServerProps"),y=(0,r.l)(o,"unstable_getServerSideProps"),v=new l.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/feeds",pathname:"/feeds",bundlePath:"",filename:""},components:{App:c.default,Document:d()},userland:o});a()}catch(e){a(e)}})},7435:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(997);function l({kind:e="info",message:s,onClose:t}){let l="success"===e?"green":"warning"===e?"yellow":"error"===e?"red":"blue";return(0,a.jsxs)("div",{className:`rounded-md border px-3 py-2 bg-${l}-50 border-${l}-200 text-${l}-800 flex items-start justify-between gap-2`,children:[a.jsx("div",{children:s}),t&&a.jsx("button",{className:`text-${l}-800`,onClick:t,children:"\xd7"})]})}},3221:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>u});var l=t(997),i=t(5941),r=t(4985),n=t(5573),d=t(6689),c=t(7435),o=e([i,r,n]);function u(){let{data:e,error:s,isLoading:t,mutate:a}=(0,i.default)(["/v1/feeds"],()=>n.v1.listFeedsV1V1FeedsGet({})),[o,u]=(0,d.useState)(""),[h,g]=(0,d.useState)("1h"),[m,p]=(0,d.useState)(""),[x,j]=(0,d.useState)(!1),[b,f]=(0,d.useState)(!1),[k,N]=(0,d.useState)(""),[y,v]=(0,d.useState)(null),[S,P]=(0,d.useState)(null),[C,q]=(0,d.useState)(null);async function w(){if(!o.trim()){v({kind:"error",message:"URL is required"});return}try{await n.IH.createFeedFeedsPost({feed:{url:o,pollFrequency:h,initialLookbackPeriod:m||void 0,isPaywalled:x,rssRequiresAuth:b,siteConfigId:k||void 0}}),u(""),p(""),N(""),j(!1),f(!1),v({kind:"success",message:"Feed created"}),a()}catch(e){v({kind:"error",message:e?.message||String(e)})}}async function F(e){if(confirm("Delete feed?"))try{await n.IH.deleteFeedFeedsFeedIdDelete({feedId:e}),v({kind:"success",message:"Feed deleted"}),a()}catch(e){v({kind:"error",message:e?.message||String(e)})}}async function _(e){P(e.id),q({url:e.url||"",pollFrequency:e.poll_frequency||e.pollFrequency||"1h",initialLookbackPeriod:e.initial_lookback_period||e.initialLookbackPeriod||"",isPaywalled:!!(e.is_paywalled??e.isPaywalled),rssRequiresAuth:!!(e.rss_requires_auth??e.rssRequiresAuth),siteConfigId:e.site_config_id||e.siteConfigId||""})}function I(){P(null),q(null)}async function R(e){try{await n.IH.updateFeedFeedsFeedIdPut({feedId:e,feed:{url:C.url,pollFrequency:C.pollFrequency,initialLookbackPeriod:C.initialLookbackPeriod||void 0,isPaywalled:!!C.isPaywalled,rssRequiresAuth:!!C.rssRequiresAuth,siteConfigId:C.siteConfigId||void 0}}),v({kind:"success",message:"Feed updated"}),P(null),q(null),a()}catch(e){v({kind:"error",message:e?.message||String(e)})}}return(0,l.jsxs)("div",{children:[l.jsx(r.Z,{}),(0,l.jsxs)("main",{className:"container py-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Feeds"}),y&&l.jsx("div",{className:"mb-3",children:l.jsx(c.Z,{kind:y.kind,message:y.message,onClose:()=>v(null)})}),(0,l.jsxs)("div",{className:"card p-4 mb-4 grid grid-cols-1 md:grid-cols-3 gap-2",children:[l.jsx("h3",{className:"font-semibold md:col-span-3",children:"Create Feed"}),l.jsx("input",{className:"input md:col-span-2",placeholder:"Feed URL",value:o,onChange:e=>u(e.target.value)}),l.jsx("input",{className:"input",placeholder:"Poll frequency (e.g., 1h)",value:h,onChange:e=>g(e.target.value)}),l.jsx("input",{className:"input",placeholder:"Initial lookback (e.g., 7d)",value:m,onChange:e=>p(e.target.value)}),l.jsx("input",{className:"input",placeholder:"Site Config ID (optional)",value:k,onChange:e=>N(e.target.value)}),(0,l.jsxs)("label",{className:"inline-flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:x,onChange:e=>j(e.target.checked)})," Paywalled"]}),(0,l.jsxs)("label",{className:"inline-flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:b,onChange:e=>f(e.target.checked)})," RSS requires auth"]}),l.jsx("button",{className:"btn",onClick:w,children:"Create"})]}),t&&l.jsx("p",{className:"text-gray-600",children:"Loading..."}),s&&l.jsx(c.Z,{kind:"error",message:String(s)}),e&&l.jsx("div",{className:"card p-0 overflow-hidden",children:(0,l.jsxs)("table",{className:"table",children:[l.jsx("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"th",children:"URL"}),l.jsx("th",{className:"th",children:"Poll"}),l.jsx("th",{className:"th",children:"Lookback"}),l.jsx("th",{className:"th",children:"Paywalled"}),l.jsx("th",{className:"th",children:"RSS Auth"}),l.jsx("th",{className:"th",children:"Site Config"}),l.jsx("th",{className:"th",children:"Actions"})]})}),l.jsx("tbody",{children:(e.items||e).map(e=>l.jsx("tr",{className:"odd:bg-white even:bg-gray-50",children:S===e.id?(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"td",children:l.jsx("input",{className:"input w-full",value:C.url,onChange:e=>q({...C,url:e.target.value})})}),l.jsx("td",{className:"td",children:l.jsx("input",{className:"input w-full",value:C.pollFrequency,onChange:e=>q({...C,pollFrequency:e.target.value})})}),l.jsx("td",{className:"td",children:l.jsx("input",{className:"input w-full",value:C.initialLookbackPeriod,onChange:e=>q({...C,initialLookbackPeriod:e.target.value})})}),l.jsx("td",{className:"td",children:l.jsx("input",{type:"checkbox",checked:C.isPaywalled,onChange:e=>q({...C,isPaywalled:e.target.checked})})}),l.jsx("td",{className:"td",children:l.jsx("input",{type:"checkbox",checked:C.rssRequiresAuth,onChange:e=>q({...C,rssRequiresAuth:e.target.checked})})}),l.jsx("td",{className:"td",children:l.jsx("input",{className:"input w-full",value:C.siteConfigId,onChange:e=>q({...C,siteConfigId:e.target.value})})}),(0,l.jsxs)("td",{className:"td flex gap-2",children:[l.jsx("button",{className:"btn",onClick:()=>R(e.id),children:"Save"}),l.jsx("button",{className:"btn",onClick:I,children:"Cancel"})]})]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"td",children:e.url}),l.jsx("td",{className:"td",children:e.poll_frequency||e.pollFrequency}),l.jsx("td",{className:"td",children:e.initial_lookback_period||e.initialLookbackPeriod||""}),l.jsx("td",{className:"td",children:String(e.is_paywalled??e.isPaywalled)}),l.jsx("td",{className:"td",children:String(e.rss_requires_auth??e.rssRequiresAuth)}),l.jsx("td",{className:"td",children:e.site_config_id||e.siteConfigId||""}),(0,l.jsxs)("td",{className:"td flex gap-2",children:[l.jsx("button",{className:"btn",onClick:()=>_(e),children:"Edit"}),l.jsx("button",{className:"btn",onClick:()=>F(e.id),children:"Delete"})]})]})},e.id))})]})})]})]})}[i,r,n]=o.then?(await o)():o,a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5526:e=>{e.exports=import("next-auth/react")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[899,910,902],()=>t(621));module.exports=a})();
"use strict";(()=>{var e={};e.id=964,e.ids=[964,660],e.modules={3796:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{config:()=>g,default:()=>p,getServerSideProps:()=>h,getStaticPaths:()=>m,getStaticProps:()=>x,reportWebVitals:()=>b,routeModule:()=>N,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>f,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>j});var a=t(7093),l=t(5244),i=t(1323),n=t(2899),c=t.n(n),d=t(6814),o=t(1257),u=e([d,o]);[d,o]=u.then?(await u)():u;let p=(0,i.l)(o,"default"),x=(0,i.l)(o,"getStaticProps"),m=(0,i.l)(o,"getStaticPaths"),h=(0,i.l)(o,"getServerSideProps"),g=(0,i.l)(o,"config"),b=(0,i.l)(o,"reportWebVitals"),j=(0,i.l)(o,"unstable_getStaticProps"),S=(0,i.l)(o,"unstable_getStaticPaths"),v=(0,i.l)(o,"unstable_getStaticParams"),P=(0,i.l)(o,"unstable_getServerProps"),f=(0,i.l)(o,"unstable_getServerSideProps"),N=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin",pathname:"/admin",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:o});r()}catch(e){r(e)}})},1257:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{default:()=>o});var a=t(997),l=t(5941),i=t(4985),n=t(6689),c=t(5573),d=e([l,i,c]);function o(){let[e,s]=(0,n.useState)(""),{data:t}=(0,l.default)(["/v1/status"],()=>c.v1.getStatusV1StatusGet()),{data:r}=(0,l.default)(["/v1/status/db"],()=>c.v1.dbStatusV1StatusDbGet());return(0,a.jsxs)("div",{children:[a.jsx(i.Z,{}),(0,a.jsxs)("main",{className:"container py-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Admin"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"card p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"System"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-800 space-y-1",children:[(0,a.jsxs)("li",{children:["API Status: ",t?.status||"—"]}),(0,a.jsxs)("li",{children:["Version: ",t?.version||"—"]}),(0,a.jsxs)("li",{children:["OpenAPI: ",a.jsx("a",{className:"text-blue-600 hover:underline",href:"/openapi.json",target:"_blank",rel:"noreferrer",children:"/openapi.json"})]}),(0,a.jsxs)("li",{children:["Docs: ",a.jsx("a",{className:"text-blue-600 hover:underline",href:"/docs",target:"_blank",rel:"noreferrer",children:"/docs"})]}),(0,a.jsxs)("li",{children:["Metrics: ",a.jsx("a",{className:"text-blue-600 hover:underline",href:"/metrics",target:"_blank",rel:"noreferrer",children:"/metrics"})]})]})]}),(0,a.jsxs)("div",{className:"card p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Database"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-800 space-y-1",children:[(0,a.jsxs)("li",{children:["Status: ",r?.ok===!0?"ok":r?"check":"—"]}),(0,a.jsxs)("li",{children:["pg_trgm: ",String(r?.details?.pg_trgm_enabled??"—")]}),r?.details?.indexes&&(0,a.jsxs)("li",{children:["Indexes OK: ",String(Object.values(r.details.indexes).every(Boolean))]})]})]}),(0,a.jsxs)("div",{className:"card p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Actions"}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:async()=>{let e=await c.v1.postgresPrepareV1AdminPostgresPreparePost();s(JSON.stringify(e))},children:"Prepare Postgres (pg_trgm + indexes)"}),a.jsx("button",{onClick:async()=>{let e=await c.v1.postgresEnableRlsV1AdminPostgresEnableRlsPost();s(JSON.stringify(e))},children:"Enable RLS (owner policies)"})]})]})]}),e&&a.jsx("pre",{className:"card p-3 overflow-auto text-sm",children:e})]})]})}[l,i,c]=d.then?(await d)():d,r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5526:e=>{e.exports=import("next-auth/react")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[899,910,902],()=>t(3796));module.exports=r})();